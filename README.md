# Productivity App

This is the code of [Productivity](productivitytasks.com) - a project dedicated for
people who want to maximize their productivity in carrying out various tasks.

## Features

- Allows users to add tasks and monitor their progress
- Provides support with completing tasks thanks to ChatGPT's assistance
- Company managment mode gives employers a way to view their employee's tasks
- Created with the greatest technologies in order to improve performance

## Implementation

### Backend

#### Database

PostgreSQL's efficient querying, great data integrity and mostly reliability is the
reason why it is the base of the application. It is hosted on Cloud SQL, Google Cloud
Platform.

Liquibase is the tool which controls the database and makes changes to it. All
changesets are available in changelog file, which allows to avoid database schema
differences among different deployment enviorments. It also enables easy database schema
changes, migrations and rollbacks.

Sqlacodegen auto-generates database python connector layer, using the most recent
Liquibase configuration in order to avoid situations where API layer is not synchronized
with the database state.

Combining Liquibase, sqlacodegen and pytest allow to test whether database connector is
up to date.

The database contains 4 tables: employees, companies, users, tasks, additional two:
databasechangelog and databasechangeloglock are automatically generated by Liquibase in
order to store information about database changes.

#### API

FastAPI was used as it has the highest performance among Python API's and implements
best API standars (OpenAPI,
[Swagger](https://productivity-pzaiolprqa-uc.a.run.app/docs)) which makes development
easier. With Python script and FastAPI it is possible to auto-generate openapi.json
file.

OpenAPI typescript client (connector) for the front-end of the application can be
automatically generated based on openapi.json which contains full API specification.

SQLAlchemy ORM allows to efficiently access and manage data from the database.

There are 15 endpoints included in API: 8 for users and 7 for companies, one of them
makes request to the OpenAI API in order to ask ChatGPT a question.

Docker's isolated and consistent enviorment as well as efficiency in resources,
deploying and performance, made it a great choice for deployment and managment of the
application.

API's server Docker image is deployed to GCP's Artifact Registry and then run on Cloud
Run. Hosting on the GCP just like database makes connection within API and database very
fast.

#### Testing

After a commit, to ensure that application's file are up to date there are pytests run
on Github Actions.

OpenAPI is tested by re-generating openapi.json file, formatting it with pre-commit and
asserting that it is the same as the already commited one.

Testing database connector is done by staring an empty PostgreSQL database and applying
all Liquibase's changelog queries to it. Based on this database, there is a temporary
database connector file generated and compared with the original one to ensure that it
exactly represents current state of the database.

#### Additional information

- Pre-commit's automatic formatting of the code helps maintain consistent code quality
- Poetry simplifies dependency managment and keeps the project isolated in a virutal
  enviorment

### Frontend

#### Interface

Figma was the best choice for creating a design of the website as it makes development
much easier because of export options and tools specified for developers such as
generated CSS code. Figma's atoms designs and inspirations improved the visual appeal of
the final product.

The design was supposed to be clean but also colorful and contrasting - great
combination for keeping users attencion without being overwhelming. Website is dominated
by dark blue, pink and white. When hovered, buttons are baby blue, on focus their border
becomes pink light. All atoms are minimalistic and dark blue.

Responsive to different devices, the website features three modes of responsiveness
tailored for monitors, tablets, and phones, but it is mostly dedicated for computers.

#### JavaScipt library

React is the core library for the application, mainly because of its fast engine and
smart rendering methods which make the website run smoothly and quickly. Moreover, the
React ecosystem promotes best practices in code organization and reusability,
contributing to maintainable and scalable codebases, for example dropdown component is
used in many parts of the website such as register, adding tasks or navigation bar.

The whole application contains 23 components. There are many icons which results with 33
imported images.

Bootstrap elements such as progress bar and tooltips are used because it provides good
solutions and highly customizable interface of the elements. On the other hand,
previously mentioned drodown had to be written from scratch as the bootstrap's one had
some bugs and it wasn't possible to make it look exactly like in the design.

#### Backend connector client

OpenAPI typescript connector is the safest and most powerful option for API. It also
allows to improve code quality and make it easier for the developer. This technology
requires less code and makes it possible to catch errors faster then with HTTP requests
to specific endpoints.

The development becomes faster as the client is automatically generated based on full
API specification in the backend and it offers ready-to-use functions.

#### Unit Testing

Jest unit testing allows to ensure the reliability and correctness of the code. Jest
provides a framework for writing and exectuting tests which helps to catch any bugs
early in the development process.

There are 3 unit tests in the application.

Two of these tests are dedicated to check accuracy of progress value. This function
takes tasks that are grouped by their state (To do, In Progress or Done) and calculates
percent of done tasks. There is also a test that examines the edge case where no tasks
exist, aiming to prevent any undefined behavior in the code.

Other test validates the function responsible for converting user tasks recived from the
database to the form that React displays. This function plays a cruicial role in
ensuring that the data retrieved from the backend is accurately transformed for the
frontend's visual representation. Mocked data are given to the converting function and
result is compared with the expected one.

#### Build and deployment

Github Actions workflow is set and it runs both unit tests and end-to-end tests. To
maintain consistency, these tests are exectured on a local server.

Build is initiated by using the command "npm run build" which compiles React application
into optimized production code.

App Engine is the part of GCP where code is deployed to by Github Actions after passing
all tests. App Engine is the most benefitial solution as it easy to deploy and handles
increases in traffic really well ensuring good performance.

#### Domain

The domain [productivitytasks.com](productivitytasks.com) (also available as
www.productivitytasks.com) was bought on Google Domains. It provides users a memorable
and easy-to-access way to reach out platform. It is a combination of words: Productivity
and tasks, to include both name of the website and its main feature.

It is automatically managed by App Engine.

#### Additional information

- Node Package Manager dependencies can be found in package.json in order to maximize
  efficiency in adding or removing packages
- Pre-commit formats every line of code with Prettier to maintain code quality

### End-to-end testing

Cypress end to end tests are run to ensure that frontend and backend is properly
connected. Cypress provides many features like waiting for response, easy setup or
JavaScript integration, which made it a perfect solution for this application.

There are 6 steps in testing of the app:

- Register
- Login
- Adding a few new tasks
- Filtering the tasks by name and priority
- Deleting all tasks
- Logging out

Each step is followed by checking if it was performed correctly, for example after
deleting all tasks it is checked that each column is empty.

Cypress automatically records the testing process which makes it easy to debug (you can
the video in files).
